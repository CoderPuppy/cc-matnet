os.loadAPI('apis/mat')

function create()
	local router = {}
	local routes = {}

	function router.add(ma, route)
		routes[#routes + 1] = { mat.wrap(ma), route }
	end

	function router.each(fn)
		for i = 1, #routes do
			local ma, route = unpack(routes[i])
			fn(ma, route, i)
		end

		return router
	end

	return router
end